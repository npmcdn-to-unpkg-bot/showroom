{"version":3,"sources":["content.js"],"names":[],"mappings":"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","file":"content_compiled.js","sourcesContent":["angular\r\n.module(\"content\", ['KM_tools', 'MockDb', 'socket.io', 'infinite-scroll', 'ui.router', 'ngAnimate', 'ngSanitize'])\r\n.config(['$stateProvider', '$urlRouterProvider', function($stateProvider, $urlRouterProvider) {\r\n\t$stateProvider\r\n\t.state('index_web', {\r\n\t\turl: \"/index_web\",\r\n\t\tabstract: true,\r\n\t\ttemplateUrl: \"_index_web.html\"\r\n\t})\r\n\t.state('instMsg', {\r\n\t\turl: \"/instMsg\",\r\n\t\t\t\ttemplateUrl: \"_instMsg.html\",\r\n\t\t\t\tcontroller: '_instMsg'\r\n\t})\r\n\t.state('newsFeed', {\r\n\t\turl: \"/newsFeed\",\r\n\t\t\t\ttemplateUrl: \"_newsFeed.html\",\r\n\t\t\t\tcontroller: '_newsFeed'\r\n\t})\r\n\t.state('profile', {\r\n\t\turl: \"/profile/{userId:int}\",\r\n\t\t\t\ttemplateUrl: \"_profile.html\",\r\n\t\t\t\tcontroller: '_profile'\r\n\t});\r\n\t$urlRouterProvider.otherwise(\"/newsFeed\");\r\n}])\r\n.config(['$socketProvider', 'configPara', function ($socketProvider, configPara) {\r\n\t\t$socketProvider.setConnectionUrl(configPara.ip);\r\n\t}\r\n])\r\n.controller(\"content_main\", ['$scope', 'common', 'ChainCloudDb', function ($scope, common, ChainCloudDb) {\r\n\t$scope.$root.loginUserId = ChainCloudDb.loginUserId;\r\n\t$scope.$root.loginUser = ChainCloudDb.user[ChainCloudDb.loginUserId];\r\n}])\r\n.controller(\"_instMsg\", ['$scope', '$timeout', function ($scope, $timeout) {\r\n\t$scope.messageList = [\r\n\t\t{text: 'Hello. What can I do for you?'},\r\n\t\t{text: 'I\\'m just looking around. Will you tell me something about yourself?'},\r\n\t\t{text: 'OK, my name is Limingqiang. I like singing, playing basketballand so on.'},\r\n\t\t{text: 'I am Derek. I am a photographer.'}\r\n\t];\r\n\tvar objDiv = document.getElementById(\"messagechats\");\r\n\r\n\t$scope.sendMessage = function(){\r\n\t\t$scope.messageList.push({text: $scope.currentMsg});\r\n\t\t$scope.currentMsg='';\r\n\t\t$timeout(function(){\r\n\t\t\tobjDiv.scrollTop = objDiv.scrollHeight;\r\n\t\t}, 50);\r\n\t\t$timeout(function(){\r\n\t\t\t$scope.messageList.push({text: 'Good'});\r\n\t\t\t$timeout(function(){\r\n\t\t\t\tobjDiv.scrollTop = objDiv.scrollHeight;\r\n\t\t\t}, 50);\r\n\t\t}, 1000);\r\n\t};\r\n}])\r\n.controller(\"_newsFeed\", ['$scope', '$timeout', 'ChainCloudDb', function ($scope, $timeout, ChainCloudDb) {\r\n\t$scope.postList = ChainCloudDb.fetchPost({posttype: 'all'});\r\n\t$scope.currentMsg = [];\r\n\t$scope.addComment = function(index){\r\n/* \t\tChainCloudDb.addComment(postId, ChainCloudDb.loginUserId, {text: $scope.currentMsg[index]});\r\n\t\t$scope.postList = ChainCloudDb.fetchPost({posttype: 'all'}); */\r\n\t\t$scope.postList[index].comments.push({\r\n\t\t\towner: ChainCloudDb.user[$scope.$root.loginUserId],\r\n\t\t\tpublishtime: '1 min ago',\r\n\t\t\tcontent: {text: $scope.currentMsg[index]}\r\n\t\t});\r\n\t\t$scope.currentMsg[index] = '';\r\n\t};\r\n\tvar reader = new FileReader();\r\n\t$scope.addPost = function(){\r\n\t\tvar messageImageFile = document.getElementById(\"messageImage\"),\r\n\t\t\tmessageFileFile = document.getElementById(\"messageFile\"), file, images = [], attachments = [];\r\n\t\tif ('files' in messageImageFile) {\r\n\t\t\tif (messageImageFile.files.length > 0) {\r\n\t\t\t\tfor (var i = 0; i < messageImageFile.files.length; i++) {\r\n\t\t\t\t\tfile = messageImageFile.files[i];\r\n\t\t\t\t\t//console.log(file);\r\n\t\t\t\t\treader.onload = function(e) { images.push(e.target.result); };\r\n\t\t\t\t\treader.readAsDataURL(file);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ('files' in messageFileFile) {\r\n\t\t\tif (messageImageFile.files.length > 0) {\r\n\t\t\t\tfor (var i = 0; i < messageFileFile.files.length; i++) {\r\n\t\t\t\t\tfile = messageImageFile.files[i];\r\n\t\t\t\t\tattachments.push({filename: file.name});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t$timeout(function(){\r\n\t\t\t$scope.postList.unshift({\r\n\t\t\t\towner: ChainCloudDb.user[$scope.$root.loginUserId],\r\n\t\t\t\tpublishtime: '1 min ago',\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\timages: images,\r\n\t\t\t\t\ttext: $scope.newPostMsg,\r\n\t\t\t\t\tattachments: attachments\r\n\t\t\t\t},\r\n\t\t\t\tcomments: []\r\n\t\t\t});\r\n\t\t\t$scope.newPostMsg = '';\r\n\t\t}, 100);\r\n\t\t\r\n\t};\r\n\t$scope.clickInput = function(elementId) {\r\n\t\tdocument.getElementById(elementId).click();\r\n\t};\r\n\t$scope.linkify = function(inputtext){\r\n\t\tvar result;\r\n\t\tresult = linkifyStr(inputtext, {defaultProtocol: 'https'});\r\n\t\treturn result;\r\n\t};\r\n}])\r\n.controller(\"_profile\", ['$scope', '$stateParams', 'ChainCloudDb', function ($scope, $stateParams, ChainCloudDb) {\r\n\t$scope.linkify = function(inputtext){\r\n\t\tvar result;\r\n\t\tresult = linkifyStr(inputtext, {defaultProtocol: 'https'});\r\n\t\treturn result;\r\n\t};\r\n\t$scope.loginUserId = ChainCloudDb.loginUserId;\r\n\t$scope.profileUserId = $stateParams.userId;\r\n\t$scope.profileUser = ChainCloudDb.user[$scope.profileUserId];\r\n\t$scope.activityList = ChainCloudDb.fetchActivity($scope.profileUserId).map(function(act){\r\n\t\tvar tempAct = {};\r\n\t\tswitch(act.name){\r\n\t\t\tcase 'post':\r\n\t\t\t\ttempAct.text1 = 'published a post';\r\n\t\t\t\ttempAct.text2 = act.post[0].content.text;\r\n\t\t\t\ttempAct.images = act.post[0].content.images;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'comment':\r\n\t\t\t\ttempAct.text1 = 'commented to a post';\r\n\t\t\t\ttempAct.text2 = act.post[0].content.text;\r\n\t\t\t\ttempAct.images = act.post[0].content.images;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'like':\r\n\t\t\t\ttempAct.text1 = 'tagged a post';\r\n\t\t\t\ttempAct.text2 = act.post[0].content.text;\r\n\t\t\t\ttempAct.images = act.post[0].content.images;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t}\r\n\t\treturn tempAct;\r\n\t});\r\n}])\r\n.directive('hideTabs', ['$rootScope', function($rootScope) {\r\n  return {\r\n      restrict: 'A',\r\n      link: function($scope, $el) {\r\n          $rootScope.hideTabs = 'tabs-item-hide';\r\n          $scope.$on('$destroy', function() {\r\n              $rootScope.hideTabs = '';\r\n          });\r\n      }\r\n  };\r\n}])\r\n.directive('nsFillForm', [function() {\r\n  return {\r\n    restrict: 'AE',\r\n    scope: {\r\n      nsFields: '=nsFields',\r\n\t\t\tnsFormData: '=nsFormData',\r\n\t\t\tnsCancel: '&nsCancel',\r\n\t\t\tnsSave: '&nsSave',\r\n\t\t\tnsDelete: '&nsDelete'\r\n    },\r\n\t\ttemplateUrl: '_nsFillForm.html',\r\n    link: function(scope, element, attrs) {\r\n\t\t\tscope.nsShowDelete = (attrs.hasOwnProperty('nsShowDelete'))? (attrs.nsShowDelete === 'true') : false;\r\n\t\t}\r\n  };\r\n}])\r\n.directive('nsSearchBox', [function() {\r\n  return {\r\n    restrict: 'AE',\r\n    scope: {\r\n      nsSearch: '=nsSearch',\r\n\t\t\tnsClickButton: '&nsClickButton'\r\n    },\r\n\t\ttemplateUrl: '_nsSearchBox.html',\r\n    link: function(scope, element, attrs) {\r\n\t\t\tscope.nsShowButton = (attrs.hasOwnProperty('nsShowButton'))? (attrs.nsShowButton === 'true') : false;\r\n\t\t}\r\n  };\r\n}])\r\n.directive('nsLinkBox', ['$state', function($state) {\r\n  return {\r\n    restrict: 'AE',\r\n\t\ttransclude: true,\r\n    scope: {},\r\n\t\ttemplateUrl: '_nsLinkBox.html',\r\n    link: function(scope, element, attrs) {\r\n\t\t\tscope.nsState = (attrs.hasOwnProperty('nsState'))? attrs.nsState : \"\";\r\n\t\t\tscope.nsIcon = (attrs.hasOwnProperty('nsIcon'))? attrs.nsIcon : \"\";\r\n\t\t\tscope.$state = $state;\r\n\t\t}\r\n  };\r\n}]);"]}